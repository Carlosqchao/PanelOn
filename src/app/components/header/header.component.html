<nav class="main-nav"
     aria-label="Main Navigation"
     [ngClass]="{ 'header-hidden': !isVisible, 'header-visible': isVisible }">
  <div class="nav-content">
    <div class="logo-container">
      <a routerLink="">
        <img class="logo-image" src="/favicon.ico" alt="Logo" />
      </a>
    </div>

    <button class="mobile-menu-toggle" (click)="toggleMobileMenu()" *ngIf="isMobile">
      <span class="menu-icon" [ngClass]="{ 'open': mobileMenuOpen }"></span>
    </button>

    <ul class="navigation-menu">
      <li class="navigation-item">
        <a [routerLink]="['/search-page']" [queryParams]="{ option: 'characters' }">{{ 'HEADER.CHARACTERS' | translate }}</a>
      </li>
      <li class="navigation-item">
        <a [routerLink]="['/search-page']" [queryParams]="{ option: 'comic' }">{{ 'HEADER.COMICS' | translate }}</a>
      </li>
      <li class="navigation-item">
        <a [routerLink]="['/search-page']" [queryParams]="{ option: 'news' }">{{ 'HEADER.NEWS' | translate }}</a>
      </li>
      <li class="navigation-item">
        <a [routerLink]="['/community']" [queryParams]="{ option: 'community' }">{{ 'HEADER.COMMUNITY' | translate }}</a>
      </li>
      <li class="navigation-item" *ngIf="!user">
        <a routerLink="/login">{{ 'HEADER.SUBSCRIPTION' | translate }}</a>
      </li>
      <li class="navigation-item" *ngIf="user">
        <a routerLink="/subscription-plans">{{ 'HEADER.SUBSCRIPTION' | translate }}</a>
      </li>
    </ul>

    <div class="auth-links">
      <ng-container *ngIf="!user">
        <a routerLink="/register">{{ 'HEADER.SIGN_UP' | translate }}</a>
        <a routerLink="/login">{{ 'HEADER.LOGIN' | translate }}</a>
      </ng-container>

      <ng-container *ngIf="user">
        <div class="profile-container" (click)="toggleDropdown()" #profileMenu>
          <div class="profile-content">
            <img class="profile-image" [src]="userData?.imageUrl || '../../assets/default-user-icon.png'" alt="Profile">
            <svg class="dropdown-icon" width="10" height="6" viewBox="0 0 10 6" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
              <path d="M1 1L5 5L9 1" stroke="white" stroke-width="4" stroke-linecap="round"
                    stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="dropdown-menu" [ngClass]="{ 'dropdown-visible': showDropdown }">
            <a routerLink="/user-page" class="dropdown-item">{{ userData?.username || 'Profile' }}</a>
            <a (click)="toggleTheme()" class="dropdown-item">
              <span *ngIf="isDarkMode; else lightModeIcon">Light</span>
              <ng-template #lightModeIcon>Dark</ng-template>
            </a>
            <a (click)="logout()" class="dropdown-item logout">Logout</a>
          </div>
        </div>
      </ng-container>
      <div class="language-selector">
        <select [(ngModel)]="currentLang" (change)="changeLanguage(currentLang)">
          <option value="es">Espa√±ol</option>
          <option value="en">English</option>
          <option value="fr">French</option>
          <option value="it">Italian</option>
          <option value="pt">Portuguese</option>
        </select>
      </div>
    </div>
  </div>

  <div class="mobile-menu" [ngClass]="{ 'mobile-menu-open': mobileMenuOpen }" *ngIf="isMobile">
    <ng-container *ngIf="user">
      <div class="mobile-user-profile">
        <img class="profile-image" [src]="userData?.imageUrl || '../../assets/default-user-icon.png'" alt="Profile" />
        <div class="username-text" routerLink="/user-page">{{ userData?.username || 'Profile' }}</div>
        <a (click)="toggleTheme()" class="dropdown-item">
          <span *ngIf="isDarkMode; else lightModeIcon">Light</span>
          <ng-template #lightModeIcon>Dark</ng-template>
        </a>
        <a class="dropdown-item logout" (click)="logout()">Logout</a>
        <div class="username-text" routerLink="/user-page">{{ userData?.username || 'HEADER.PROFILE' | translate }}</div>
        <a class="dropdown-item logout" (click)="logout()">{{ 'HEADER.LOGOUT' | translate }}</a>
      </div>
      <div class="language-selector">
        <select [(ngModel)]="currentLang" (change)="changeLanguage(currentLang)">
          <option value="es">Spain</option>
          <option value="en">English</option>
          <option value="fr">French</option>
          <option value="it">Italian</option>
          <option value="pt">Portuguese</option>
        </select>
      </div>
    </ng-container>



    <ul class="mobile-navigation-menu">
      <li class="mobile-navigation-item" *ngIf="!user">
        <a routerLink="/register" class="mobile-navigation-item">{{ 'HEADER.SIGN_UP' | translate }}</a>
      </li>
      <li class="mobile-navigation-item" *ngIf="!user">
        <a routerLink="/login" class="mobile-navigation-item">{{ 'HEADER.LOGIN' | translate }}</a>
      </li>
      <li class="mobile-navigation-item">
        <a [routerLink]="['/search-page']" [queryParams]="{ option: 'characters' }">{{ 'HEADER.CHARACTERS' | translate }}</a>
      </li>
      <li class="mobile-navigation-item">
        <a [routerLink]="['/search-page']" [queryParams]="{ option: 'comic' }">{{ 'HEADER.COMICS' | translate }}</a>
      </li>
      <li class="mobile-navigation-item">
        <a [routerLink]="['/search-page']" [queryParams]="{ option: 'news' }">{{ 'HEADER.NEWS' | translate }}</a>
      </li>
      <li class="mobile-navigation-item">
        <a [routerLink]="['/community']" [queryParams]="{ option: 'community' }">{{ 'HEADER.COMMUNITY' | translate }}</a>
      </li>
      <li class="mobile-navigation-item" *ngIf="!user">
        <a routerLink="/login">{{ 'HEADER.SUBSCRIPTION' | translate }}</a>
      </li>
      <li class="mobile-navigation-item" *ngIf="user">
        <a routerLink="/subscription-plans">{{ 'HEADER.SUBSCRIPTION' | translate }}</a>
      </li>
    </ul>
  </div>
</nav>
<div class="nav-spacer"></div>

