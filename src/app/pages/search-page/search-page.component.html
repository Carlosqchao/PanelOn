<app-header></app-header>

<div class="center-container" *ngIf="option === 'comic'">
  <div class="search-bar">
    <div class="search-sort-wrapper">
      <app-search-bar (search)="handleComicSearch($event)" (filter)="handleFilter()"></app-search-bar>

      <div class="dropdown">
        <button class="sort-button" (click)="toggleDropdown()">
          {{ 'search.orderBy' | translate }}
        </button>
        <div class="dropdown-content" *ngIf="dropdownVisible">
          <button class="dropdown-item" (click)="loadComicsOrderedByDate()">
            {{ sortByDateAscending ? ('search.dateDesc' | translate) : ('search.dateAsc' | translate) }}
          </button>

          <button class="dropdown-item" (click)="loadComicsOrderedByRating()">
            {{ sortByRatingAscending ? ('search.ratingDesc' | translate) : ('search.ratingAsc' | translate) }}
          </button>

        </div>
      </div>
    </div>

    <div class="filter-dropdown" *ngIf="filterVisible">
      <div class="filter-header">
        <h4>{{ 'search.filterByGenre' | translate }}</h4>
        <button class="close-btn" (click)="filterVisible = false">{{ 'search.close' | translate }}</button>
      </div>
      <div class="filter-options">
        <label *ngFor="let genre of availableGenres" class="filter-item">
          <input
            type="checkbox"
            [value]="genre"
            [checked]="selectedGenres.includes(genre)"
            (change)="toggleGenre(genre)"
            class="checkbox-input"
          />
          <span class="checkbox-label">{{ genre }}</span>
        </label>
      </div>
    </div>
  </div>
  <div class="center-container">
    <app-comic-card *ngFor="let comic of paginatedComics" [imageUrl]="comic.cover" [title]="comic.title" [comicId]="comic.id"></app-comic-card>
  </div>
</div>

<div class="center-container" *ngIf="option === 'news'">
  <div class="search-bar">
    <app-search-bar (search)="handleNewsSearch($event)" (filter)="handleFilter()"></app-search-bar>
  </div>
  <div class="center-container">
    <app-news-card *ngFor="let news of news" [imageUrl]="news.image" [author]="news.author" [title]="news.title" [newsId]="news.id"></app-news-card>
  </div>
</div>




<div class="center-container" *ngIf="option === 'characters'">
  <div class="search-bar">
    <app-search-bar (search)="handleCharacterSearch($event)" (filter)="handleFilter()"></app-search-bar>
  </div>
      <div class="center-container">
        <app-character-card
          *ngFor="let character of selectedCharacters"
          [imageUrl]="character.image"
          [superheroName]="character.characterName"
          [characterName]="character.name"
          [characterId]="character.id"
        >
        </app-character-card>
      </div>
</div>
<div class="pagination" *ngIf="option==='comic' && totalPages > 1">
  <button id="prevPage" (click)="prevPage()" [disabled]="currentPage === 1">◁</button>
  <span id="pageNumber">{{ currentPage }} of {{ totalPages }}</span>
  <button id="nextPage" (click)="nextPage()" [disabled]="currentPage === totalPages">▷</button>
</div>




