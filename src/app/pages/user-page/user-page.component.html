<app-header-backlink></app-header-backlink>
<div class="user-page" *ngIf="user">
  <div class="user-info">
    <img class="userImage" src="">
    <div class="userNameBar">
      <!-- Edit mode username-->
      <div *ngIf="isEditingUsername; else displayUsername" class="edit-username-container">
        <input type="text" [(ngModel)]="newUsername" class="edit-username-input" placeholder="Username" (keyup.enter)="saveUsername()">
        <div class="edit-actions">
          <button class="action-button save-button" (click)="saveUsername()">✓</button>
          <button class="action-button cancel-button" (click)="cancelEdit()">✗</button>
        </div>
      </div>

      <!-- Normal mode username-->
      <ng-template #displayUsername>
        <p class="userName">{{user?.username}}</p>
        <button class="pencilIcon" (click)="toggleUsernameEdit()">
          <img class="icon" src="pencilIcon.png">
        </button>
      </ng-template>

      <button class="bellIcon">
        <img class="icon" src="bellIcon.png">
      </button>
    </div>
    <div class="subscriptionBar">
      <button class="subscribeButton">Active Subscription Plan</button>
      <button class="cancelButton" (click)="openModal()"><span style="color: red">Cancel subscription</span></button>
    </div>
    <p class="userDescription"></p>
  </div>

  <div class="options-container">
    <div class=center-container>
      <app-profile-option imageURL="favouritesIcon.png" optionName="SAVED"></app-profile-option>
      <app-profile-option imageURL="readingIcon.png" optionName="READING"></app-profile-option>
      <app-profile-option imageURL="myComicsIcon.png" optionName="MY COMICS"></app-profile-option>
      <app-profile-option imageURL="wishlistIcon.png" optionName="LIKES"></app-profile-option>
    </div>
  </div>

  <div class="center-container">
    <app-user-metrics value="44" title="Read comics"></app-user-metrics>
    <app-user-metrics value="5" title="Published comics "></app-user-metrics>
    <app-user-metrics value="125" title="Comic Likes"></app-user-metrics>
  </div>

  <app-button text="UPLOAD A COMIC" buttonWidth="30rem" buttonHeight="5rem" (click)="callToRead()"></app-button>

</div>
